#!/usr/bin/env bash
# This script configures Nginx to run as the nginx user and listen on port 8080.


# Modify Nginx configuration
NGINX_CONF="/etc/nginx/nginx.conf"

# Backup the original configuration file
cp "$NGINX_CONF" "$NGINX_CONF.bak"

# Update the user and listen port in the Nginx configuration
sed -i 's/^user .*;/user nginx;/' "$NGINX_CONF"
sed -i 's/listen .*;/listen 8080;/' "$NGINX_CONF"

# Start Nginx
systemctl restart nginx

# Step 4: Verify that Nginx is running as the nginx user
ps auxff | grep ngin[x]
